{
  "info": {
    "_postman_id": "c9c6c57e-2b8c-4f74-b80b-9f6a30c0612f",
    "name": "ChaoPiojos API",
    "description": "Coleccion de endpoints del backend de ChaoPiojos.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost/chaopiojos/backend/public"
    },
    {
      "key": "token",
      "value": ""
    },
    {
      "key": "userId",
      "value": "1"
    },
    {
      "key": "bookingId",
      "value": "1"
    },
    {
      "key": "productId",
      "value": "1"
    },
    {
      "key": "serviceId",
      "value": "1"
    },
    {
      "key": "productRequestId",
      "value": "1"
    },
    {
      "key": "referrerId",
      "value": "1"
    },
    {
      "key": "commissionId",
      "value": "1"
    }
  ],
  "item": [
    {
      "name": "Public",
      "item": [
        {
          "name": "POST Login",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@chaopiojos.com\",\n  \"password\": \"secret\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "login"
              ]
            }
          }
        },
        {
          "name": "GET ICal Proxy",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/ical-proxy",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "ical-proxy"
              ]
            }
          }
        },
        {
          "name": "POST Bookings (Public)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fecha\": \"2026-03-01\",\n  \"hora\": \"10:00\",\n  \"clientName\": \"Cliente Demo\",\n  \"serviceType\": \"Normal\",\n  \"servicesPerPerson\": [\"Normal\"],\n  \"whatsapp\": \"3001234567\",\n  \"email\": \"cliente@example.com\",\n  \"direccion\": \"Calle 1 # 2-3\",\n  \"barrio\": \"Centro\",\n  \"numPersonas\": 1,\n  \"edad\": \"8\",\n  \"hasAlergias\": false,\n  \"detalleAlergias\": null,\n  \"referidoPor\": null,\n  \"paymentMethod\": \"pay_later\",\n  \"referralCode\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/bookings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "bookings"
              ]
            }
          }
        },
        {
          "name": "GET Services (Public)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/services",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "services"
              ]
            }
          }
        },
        {
          "name": "POST Validate Referral Code",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"ABCD1234\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/validate-referral-code",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "validate-referral-code"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Auth (Sanctum)",
      "item": [
        {
          "name": "POST Logout",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "logout"
              ]
            }
          }
        },
        {
          "name": "GET Me",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "me"
              ]
            }
          }
        },
        {
          "name": "GET User (Request User)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/user",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "user"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "POST Regenerate Referral Code",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/regenerate-referral-code/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "regenerate-referral-code",
                "{{userId}}"
              ]
            }
          }
        },
        {
          "name": "GET Users",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            }
          }
        },
        {
          "name": "POST User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Usuario Demo\",\n  \"email\": \"usuario.demo@example.com\",\n  \"password\": \"secret123\",\n  \"role\": \"admin\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            }
          }
        },
        {
          "name": "GET User by ID",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            }
          }
        },
        {
          "name": "PUT User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Usuario Editado\",\n  \"role\": \"admin\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            }
          }
        },
        {
          "name": "PATCH User",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Usuario Parcial\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            }
          }
        },
        {
          "name": "DELETE User",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Bookings",
      "item": [
        {
          "name": "GET Bookings",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/bookings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "bookings"
              ]
            }
          }
        },
        {
          "name": "PUT Booking",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"assigned\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/bookings/{{bookingId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "bookings",
                "{{bookingId}}"
              ]
            }
          }
        },
        {
          "name": "DELETE Booking",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/api/bookings/{{bookingId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "bookings",
                "{{bookingId}}"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Products",
      "item": [
        {
          "name": "GET Products",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "products"
              ]
            }
          }
        },
        {
          "name": "POST Product",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Producto Demo\",\n  \"price\": 10000,\n  \"stock\": 10\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "products"
              ]
            }
          }
        },
        {
          "name": "GET Product by ID",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "products",
                "{{productId}}"
              ]
            }
          }
        },
        {
          "name": "PUT Product",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Producto Editado\",\n  \"price\": 12000,\n  \"stock\": 9\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "products",
                "{{productId}}"
              ]
            }
          }
        },
        {
          "name": "PATCH Product",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"stock\": 8\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "products",
                "{{productId}}"
              ]
            }
          }
        },
        {
          "name": "DELETE Product",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/api/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "products",
                "{{productId}}"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Services (Protected)",
      "item": [
        {
          "name": "POST Service",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Normal\",\n  \"price\": 70000\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/services",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "services"
              ]
            }
          }
        },
        {
          "name": "GET Service by ID",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/services/{{serviceId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "services",
                "{{serviceId}}"
              ]
            }
          }
        },
        {
          "name": "PUT Service",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Normal\",\n  \"price\": 75000\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/services/{{serviceId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "services",
                "{{serviceId}}"
              ]
            }
          }
        },
        {
          "name": "PATCH Service",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"price\": 80000\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/services/{{serviceId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "services",
                "{{serviceId}}"
              ]
            }
          }
        },
        {
          "name": "DELETE Service",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/api/services/{{serviceId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "services",
                "{{serviceId}}"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Product Requests",
      "item": [
        {
          "name": "GET Product Requests",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/product-requests",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "product-requests"
              ]
            }
          }
        },
        {
          "name": "POST Product Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productId\": {{productId}},\n  \"quantity\": 1,\n  \"notes\": \"Solicitud de prueba\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/product-requests",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "product-requests"
              ]
            }
          }
        },
        {
          "name": "PUT Product Request",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"approved\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/product-requests/{{productRequestId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "product-requests",
                "{{productRequestId}}"
              ]
            }
          }
        },
        {
          "name": "DELETE Product Request",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/api/product-requests/{{productRequestId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "product-requests",
                "{{productRequestId}}"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Referrals",
      "item": [
        {
          "name": "GET My Referral Commissions",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/my-referral-commissions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "my-referral-commissions"
              ]
            }
          }
        },
        {
          "name": "GET My Referrals",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/my-referrals",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "my-referrals"
              ]
            }
          }
        },
        {
          "name": "GET Referral Commissions (Admin)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/referral-commissions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "referral-commissions"
              ]
            }
          }
        },
        {
          "name": "GET Referral Statistics (Admin)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/referral-statistics",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "referral-statistics"
              ]
            }
          }
        },
        {
          "name": "GET Referral Payment History (Admin)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/referral-payment-history",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "referral-payment-history"
              ]
            }
          }
        },
        {
          "name": "PUT Mark Commission Paid (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/referral-commissions/{{commissionId}}/mark-paid",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "referral-commissions",
                "{{commissionId}}",
                "mark-paid"
              ]
            }
          }
        },
        {
          "name": "PUT Mark All Paid by Referrer (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/referral-commissions/mark-all-paid/{{referrerId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "referral-commissions",
                "mark-all-paid",
                "{{referrerId}}"
              ]
            }
          }
        }
      ]
    }
  ]
}
